{% extends "base_search.html" %}

{% block head %}
    <link type="text/css"
          href="{{ url_for('static', filename='navigation.css') }}"
          rel="stylesheet">
{% endblock %}

{% block body %}
    <div class="limited-width">

        <div class="textual-header">
            <h3>Narrow search result to selected categories</h3>
        </div>

        <br>

        <form method="POST">
            <table class="nav-table">
                {%- for row in table %}
                    <tr>
                        {%- for cell in row %}
                            {%- if cell.kind == 'horizontal_line' %}
                                <td>─</td>
                            {%- elif cell.kind == 'vertical_line' %}
                                <td>│</td>
                            {%- elif cell.kind == 'triplet_bottom' %}
                                <td>┬</td>
                            {%- elif cell.kind == 'triplet_right' %}
                                <td>├</td>
                            {%- elif cell.kind == 'corner' %}
                                <td>└</td>
                            {%- elif cell.kind == 'text' %}
                                <td>
                                    {% set active_realm = ' nav-label-active' if highlight.get(cell.identifier) or all_realms_active else '' %}
                                    {% set active = ' nav-label-active' if highlight.get(cell.identifier) or all_themes_active else '' %}
                                    {%- if loop.index0 == 0 -%}
                                        <button type="submit"
                                                name="current_realm"
                                                value="{{ cell.identifier }}"
                                                class="nav-label {{ active_realm }}">{{ cell.label }}</button>
                                    {% elif loop.index0 == 2 %}
                                        <button type="submit"
                                                name="current_theme"
                                                value="{{ cell.identifier }}"
                                                class="nav-label {{ active }}">{{ cell.label }}</button>
                                    {% else %}
                                        <a class="nav-label{{ active }}"
                                           href="{{ url_for('search') + web_query.replace(q=cell.identifier) |string }}">{{ cell.label }}</a>
                                    {%- endif -%}
                                </td>
                            {% else %}
                                <td>&nbsp;</td>
                            {% endif -%}
                        {% endfor -%}
                    </tr>
                {%- endfor -%}
            </table>
        </form>
    </div>
{% endblock %}